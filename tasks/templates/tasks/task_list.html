{% extends "tasks/base.html" %}

{% block content %}
<ul>
  {% for task in tasks %}
    <li>
      <span>
        {{ task.title }}
        {% if task.completed %}âœ…{% endif %}
      </span>

      <button onclick="toggleTask({{ task.id }})">Toggle</button>

      <a href="{% url 'delete-task' task.id %}"
         onclick="return confirm('Delete this task?');">
         ğŸ—‘ï¸ Delete
      </a>
    </li>
  {% endfor %}
</ul>

<script>
function toggleTask(taskId) {
  fetch(`/toggle/${taskId}/`)
    .then(response => response.json())
    .then(() => location.reload());
}
</script>
{% endblock %}
